<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--suppress ALL -->
<mapper namespace="com.huiyi.campus.dao.mapper.web.phy.PhyStudentInfoMapper">
    <resultMap id="BaseResultMap" type="com.huiyi.campus.dao.entity.phy.PhyStudentInfoEntity">
        <id column="id" jdbcType="VARCHAR" property="id"/>
        <result column="student_name" jdbcType="VARCHAR" property="studentName"/>
        <result column="sex" jdbcType="TINYINT" property="sex"/>
        <result column="age" jdbcType="INTEGER" property="age"/>
        <result column="birth_date" jdbcType="VARCHAR" property="birthDate"/>
        <result column="parent_id" jdbcType="VARCHAR" property="parentId"/>
        <result column="school_id" jdbcType="INTEGER" property="schoolId"/>
        <result column="organ_id" jdbcType="INTEGER" property="organId"/>
        <result column="student_number" jdbcType="VARCHAR" property="studentNumber"/>
        <result column="grade_id" jdbcType="VARCHAR" property="gradeId"/>
        <result column="class_id" jdbcType="VARCHAR" property="classId"/>
        <result column="nationality" jdbcType="TINYINT" property="nationality"/>
        <result column="id_card" jdbcType="VARCHAR" property="idCard"/>
        <result column="phone_number" jdbcType="VARCHAR" property="phoneNumber"/>
        <result column="image" jdbcType="VARCHAR" property="image"/>
        <result column="family_address_prov" jdbcType="VARCHAR" property="familyAddressProv"/>
        <result column="family_address_city" jdbcType="VARCHAR" property="familyAddressCity"/>
        <result column="family_address_area" jdbcType="VARCHAR" property="familyAddressArea"/>
        <result column="family_address" jdbcType="VARCHAR" property="familyAddress"/>
        <result column="census_address_prov" jdbcType="VARCHAR" property="censusAddressProv"/>
        <result column="census_address_city" jdbcType="VARCHAR" property="censusAddressCity"/>
        <result column="census_address_area" jdbcType="VARCHAR" property="censusAddressArea"/>
        <result column="census_address" jdbcType="VARCHAR" property="censusAddress"/>
        <result column="enter_time" jdbcType="TIMESTAMP" property="enterTime"/>
        <result column="doctor_id" jdbcType="INTEGER" property="doctorId"/>
        <result column="duty_doctor" jdbcType="VARCHAR" property="dutyDoctor"/>
        <result column="phy_file_date" jdbcType="TIMESTAMP" property="phyFileDate"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
        <result column="operator_id" jdbcType="INTEGER" property="operatorId"/>
        <result column="del_flag" jdbcType="TINYINT" property="delFlag"/>
    </resultMap>
    <sql id="Base_Column_List">
        id
                , student_name, sex, age, birth_date, parent_id, school_id, organ_id, student_number,
    grade_id, class_id, nationality, id_card, phone_number, image, family_address,
    census_address, enter_time, doctor_id, duty_doctor, phy_file_date, create_time, update_time,
    operator_id, del_flag, family_address_prov, family_address_city, family_address_area, census_address_prov, census_address_city ,census_address_area
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from phy_student_info
        where id = #{id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        delete
        from phy_student_info
        where id = #{id,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.huiyi.campus.dao.entity.phy.PhyStudentInfoEntity">
        insert into phy_student_info (id, student_name, sex,
                                      age, birth_date, parent_id,
                                      school_id, organ_id, student_number,
                                      grade_id, class_id, nationality,
                                      id_card, phone_number, image,
                                      family_address, census_address, enter_time,
                                      doctor_id, duty_doctor, phy_file_date,
                                      create_time, update_time, operator_id,
                                      del_flag, family_address_prov, family_address_city,
                                      family_address_area, census_address_prov, census_address_city,
                                      census_address_area)
        values (#{id,jdbcType=VARCHAR}, #{studentName,jdbcType=VARCHAR}, #{sex,jdbcType=TINYINT},
                #{age,jdbcType=INTEGER}, #{birthDate,jdbcType=VARCHAR}, #{parentId,jdbcType=VARCHAR},
                #{schoolId,jdbcType=INTEGER}, #{organId,jdbcType=INTEGER}, #{studentNumber,jdbcType=VARCHAR},
                #{gradeId,jdbcType=VARCHAR}, #{classId,jdbcType=VARCHAR}, #{nationality,jdbcType=TINYINT},
                #{idCard,jdbcType=VARCHAR}, #{phoneNumber,jdbcType=VARCHAR}, #{image,jdbcType=VARCHAR},
                #{familyAddress,jdbcType=VARCHAR}, #{censusAddress,jdbcType=VARCHAR}, #{enterTime,jdbcType=TIMESTAMP},
                #{doctorId,jdbcType=INTEGER}, #{dutyDoctor,jdbcType=VARCHAR}, #{phyFileDate,jdbcType=TIMESTAMP},
                #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}, #{operatorId,jdbcType=INTEGER},
                #{delFlag,jdbcType=TINYINT}, #{familyAddressProv,jdbcType=VARCHAR},
                #{familyAddressCity,jdbcType=VARCHAR},
                #{familyAddressArea,jdbcType=VARCHAR}, #{censusAddressProv,jdbcType=VARCHAR},
                #{censusAddressCity,jdbcType=VARCHAR}, #{censusAddressArea,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.huiyi.campus.dao.entity.phy.PhyStudentInfoEntity">
        insert into phy_student_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="studentName != null">
                student_name,
            </if>
            <if test="sex != null">
                sex,
            </if>
            <if test="age != null">
                age,
            </if>
            <if test="birthDate != null">
                birth_date,
            </if>
            <if test="parentId != null">
                parent_id,
            </if>
            <if test="schoolId != null">
                school_id,
            </if>
            <if test="organId != null">
                organ_id,
            </if>
            <if test="studentNumber != null">
                student_number,
            </if>
            <if test="gradeId != null">
                grade_id,
            </if>
            <if test="classId != null">
                class_id,
            </if>
            <if test="nationality != null">
                nationality,
            </if>
            <if test="idCard != null">
                id_card,
            </if>
            <if test="phoneNumber != null">
                phone_number,
            </if>
            <if test="image != null">
                image,
            </if>
            <if test="familyAddress != null">
                family_address,
            </if>
            <if test="censusAddress != null">
                census_address,
            </if>
            <if test="enterTime != null">
                enter_time,
            </if>
            <if test="doctorId != null">
                doctor_id,
            </if>
            <if test="dutyDoctor != null">
                duty_doctor,
            </if>
            <if test="phyFileDate != null">
                phy_file_date,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="updateTime != null">
                update_time,
            </if>
            <if test="operatorId != null">
                operator_id,
            </if>
            <if test="delFlag != null">
                del_flag,
            </if>
            <if test="familyAddressProv != null">
                family_address_prov,
            </if>
            <if test="familyAddressCity != null">
                family_address_city,
            </if>
            <if test="familyAddressArea != null">
                family_address_area,
            </if>
            <if test="censusAddressProv != null">
                census_address_prov,
            </if>
            <if test="censusAddressCity != null">
                census_address_city,
            </if>
            <if test="censusAddressArea != null">
                census_address_area,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=VARCHAR},
            </if>
            <if test="studentName != null">
                #{studentName,jdbcType=VARCHAR},
            </if>
            <if test="sex != null">
                #{sex,jdbcType=TINYINT},
            </if>
            <if test="age != null">
                #{age,jdbcType=INTEGER},
            </if>
            <if test="birthDate != null">
                #{birthDate,jdbcType=VARCHAR},
            </if>
            <if test="parentId != null">
                #{parentId,jdbcType=VARCHAR},
            </if>
            <if test="schoolId != null">
                #{schoolId,jdbcType=INTEGER},
            </if>
            <if test="organId != null">
                #{organId,jdbcType=INTEGER},
            </if>
            <if test="studentNumber != null">
                #{studentNumber,jdbcType=VARCHAR},
            </if>
            <if test="gradeId != null">
                #{gradeId,jdbcType=VARCHAR},
            </if>
            <if test="classId != null">
                #{classId,jdbcType=VARCHAR},
            </if>
            <if test="nationality != null">
                #{nationality,jdbcType=TINYINT},
            </if>
            <if test="idCard != null">
                #{idCard,jdbcType=VARCHAR},
            </if>
            <if test="phoneNumber != null">
                #{phoneNumber,jdbcType=VARCHAR},
            </if>
            <if test="image != null">
                #{image,jdbcType=VARCHAR},
            </if>
            <if test="familyAddress != null">
                #{familyAddress,jdbcType=VARCHAR},
            </if>
            <if test="censusAddress != null">
                #{censusAddress,jdbcType=VARCHAR},
            </if>
            <if test="enterTime != null">
                #{enterTime,jdbcType=TIMESTAMP},
            </if>
            <if test="doctorId != null">
                #{doctorId,jdbcType=INTEGER},
            </if>
            <if test="dutyDoctor != null">
                #{dutyDoctor,jdbcType=VARCHAR},
            </if>
            <if test="phyFileDate != null">
                #{phyFileDate,jdbcType=TIMESTAMP},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null">
                #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="operatorId != null">
                #{operatorId,jdbcType=INTEGER},
            </if>
            <if test="delFlag != null">
                #{delFlag,jdbcType=TINYINT},
            </if>
            <if test="familyAddressProv != null">
                #{familyAddressProv,jdbcType=VARCHAR},
            </if>
            <if test="familyAddressCity != null">
                #{familyAddressCity,jdbcType=VARCHAR},
            </if>
            <if test="familyAddressArea != null">
                #{familyAddressArea,jdbcType=VARCHAR},
            </if>
            <if test="censusAddressProv != null">
                #{censusAddressProv,jdbcType=VARCHAR},
            </if>
            <if test="censusAddressCity != null">
                #{censusAddressCity,jdbcType=VARCHAR},
            </if>
            <if test="censusAddressArea != null">
                #{censusAddressArea,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.huiyi.campus.dao.entity.phy.PhyStudentInfoEntity">
        update phy_student_info
        <set>
            <if test="studentName != null">
                student_name = #{studentName,jdbcType=VARCHAR},
            </if>
            <if test="sex != null">
                sex = #{sex,jdbcType=TINYINT},
            </if>
            <if test="age != null">
                age = #{age,jdbcType=INTEGER},
            </if>
            <if test="birthDate != null">
                birth_date = #{birthDate,jdbcType=VARCHAR},
            </if>
            <if test="parentId != null">
                parent_id = #{parentId,jdbcType=VARCHAR},
            </if>
            <if test="schoolId != null">
                school_id = #{schoolId,jdbcType=INTEGER},
            </if>
            <if test="organId != null">
                organ_id = #{organId,jdbcType=INTEGER},
            </if>
            <if test="studentNumber != null">
                student_number = #{studentNumber,jdbcType=VARCHAR},
            </if>
            <if test="gradeId != null">
                grade_id = #{gradeId,jdbcType=VARCHAR},
            </if>
            <if test="classId != null">
                class_id = #{classId,jdbcType=VARCHAR},
            </if>
            <if test="nationality != null">
                nationality = #{nationality,jdbcType=TINYINT},
            </if>
            <if test="idCard != null">
                id_card = #{idCard,jdbcType=VARCHAR},
            </if>
            <if test="phoneNumber != null">
                phone_number = #{phoneNumber,jdbcType=VARCHAR},
            </if>
            <if test="image != null">
                image = #{image,jdbcType=VARCHAR},
            </if>
            <if test="familyAddress != null">
                family_address = #{familyAddress,jdbcType=VARCHAR},
            </if>
            <if test="censusAddress != null">
                census_address = #{censusAddress,jdbcType=VARCHAR},
            </if>
            <if test="enterTime != null">
                enter_time = #{enterTime,jdbcType=TIMESTAMP},
            </if>
            <if test="doctorId != null">
                doctor_id = #{doctorId,jdbcType=INTEGER},
            </if>
            <if test="dutyDoctor != null">
                duty_doctor = #{dutyDoctor,jdbcType=VARCHAR},
            </if>
            <if test="phyFileDate != null">
                phy_file_date = #{phyFileDate,jdbcType=TIMESTAMP},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="operatorId != null">
                operator_id = #{operatorId,jdbcType=INTEGER},
            </if>
            <if test="delFlag != null">
                del_flag = #{delFlag,jdbcType=TINYINT},
            </if>
            <if test="familyAddressProv != null">
                family_address_prov = #{familyAddressProv,jdbcType=VARCHAR},
            </if>
            <if test="familyAddressCity != null">
                family_address_city = #{familyAddressCity,jdbcType=VARCHAR},
            </if>
            <if test="familyAddressArea != null">
                family_address_area = #{familyAddressArea,jdbcType=VARCHAR},
            </if>
            <if test="censusAddressProv != null">
                census_address_prov = #{censusAddressProv,jdbcType=VARCHAR},
            </if>
            <if test="censusAddressCity != null">
                census_address_city = #{censusAddressCity,jdbcType=VARCHAR},
            </if>
            <if test="censusAddressArea != null">
                census_address_area = #{censusAddressArea,jdbcType=VARCHAR},
            </if>
        </set>
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.huiyi.campus.dao.entity.phy.PhyStudentInfoEntity">
        update phy_student_info
        set student_name        = #{studentName,jdbcType=VARCHAR},
            sex                 = #{sex,jdbcType=TINYINT},
            age                 = #{age,jdbcType=INTEGER},
            birth_date          = #{birthDate,jdbcType=VARCHAR},
            parent_id           = #{parentId,jdbcType=VARCHAR},
            school_id           = #{schoolId,jdbcType=INTEGER},
            organ_id            = #{organId,jdbcType=INTEGER},
            student_number      = #{studentNumber,jdbcType=VARCHAR},
            grade_id            = #{gradeId,jdbcType=VARCHAR},
            class_id            = #{classId,jdbcType=VARCHAR},
            nationality         = #{nationality,jdbcType=TINYINT},
            id_card             = #{idCard,jdbcType=VARCHAR},
            phone_number        = #{phoneNumber,jdbcType=VARCHAR},
            image               = #{image,jdbcType=VARCHAR},
            family_address      = #{familyAddress,jdbcType=VARCHAR},
            census_address      = #{censusAddress,jdbcType=VARCHAR},
            enter_time          = #{enterTime,jdbcType=TIMESTAMP},
            doctor_id           = #{doctorId,jdbcType=INTEGER},
            duty_doctor         = #{dutyDoctor,jdbcType=VARCHAR},
            phy_file_date       = #{phyFileDate,jdbcType=TIMESTAMP},
            create_time         = #{createTime,jdbcType=TIMESTAMP},
            update_time         = #{updateTime,jdbcType=TIMESTAMP},
            operator_id         = #{operatorId,jdbcType=INTEGER},
            del_flag            = #{delFlag,jdbcType=TINYINT},
            family_address_prov = #{familyAddressProv,jdbcType=VARCHAR},
            family_address_city = #{familyAddressCity,jdbcType=VARCHAR},
            family_address_area = #{familyAddressArea,jdbcType=VARCHAR},
            census_address_prov = #{censusAddressProv,jdbcType=VARCHAR},
            census_address_city = #{censusAddressCity,jdbcType=VARCHAR},
            census_address_area = #{censusAddressArea,jdbcType=VARCHAR}
        where id = #{id,jdbcType=VARCHAR}
    </update>
    <!--查询所有学生档案信息-->
    <select id="selectAll" resultType="com.huiyi.campus.dao.vo.health.StudentInfoRecordVo">
        SELECT
        info.id AS "id",
        info.student_name AS "studentName",
        info.sex AS "sex",
        info.age AS "age",
        info.birth_date AS "birthDate",
        info.parent_id AS "parentId",
        p.user_name AS "parentName",
        info.school_id AS "schoolId",
        school.school_name AS "schoolName",
        info.organ_id AS "organId",
        organ.organ_name AS "organName",
        info.student_number AS "studentNumber",
        info.grade_id AS "gradeId",
        grade.grade_name AS "gradeName",
        info.class_id AS "classId",
        class.class_name AS "className",
        info.nationality AS "nationality",
        info.id_card AS "idCard",
        info.phone_number AS "phoneNumber",
        info.image AS "image",
        info.family_address_prov AS "familyAddressProv",
        info.family_address_city AS "familyAddressCity",
        info.family_address_area AS "familyAddressArea",
        info.family_address AS "familyAddress",
        info.census_address_prov AS "censusAddressProv",
        info.census_address_city AS "censusAddressCity",
        info.census_address_area AS "censusAddressArea",
        info.census_address AS "censusAddress",
        info.enter_time AS "enterTime",
        info.doctor_id AS "doctorId",
        u.nick_name AS "doctorName",
        info.duty_doctor AS "dutyDoctor",
        info.phy_file_date AS "phyFileDate",
        info.create_time AS "createTime",
        info.operator_id AS "operatorId"
        FROM
        phy_student_info info
        LEFT JOIN sys_parent p ON info.parent_id = p.id
        LEFT JOIN sys_school school ON info.school_id = school.id
        LEFT JOIN sys_organ organ ON info.organ_id = organ.id
        LEFT JOIN sys_doctor doctor ON info.doctor_id = doctor.id
        LEFT JOIN sys_user u ON info.doctor_id = u.id
        LEFT JOIN sys_grade grade ON info.grade_id = grade.id
        LEFT JOIN sys_grade_class class ON info.class_id = class.id
        WHERE 1=1
        <if test="id != null and id!=''">
            AND info.id = #{id,jdbcType=VARCHAR}
        </if>
        <if test="studentName != null and studentName!=''">
            AND info.student_name = #{studentName,jdbcType=VARCHAR}
        </if>
        <if test="sex != null and sex!=''">
            AND info.sex = #{sex,jdbcType=TINYINT}
        </if>
        <if test="familyAddressProv != null and familyAddressProv!=''">
            AND info.family_address_prov = #{familyAddressProv,jdbcType=VARCHAR}
        </if>
        <if test="familyAddressCity != null and familyAddressCity!=''">
            AND info.family_address_city = #{familyAddressCity,jdbcType=VARCHAR}
        </if>
        <if test="familyAddressArea != null and familyAddressArea!=''">
            AND info.family_address_area = #{familyAddressArea,jdbcType=VARCHAR}
        </if>
        <if test="familyAddress != null and familyAddress!=''">
            AND info.family_address = #{familyAddress,jdbcType=VARCHAR}
        </if>
        <if test="censusAddressProv != null and censusAddressProv!=''">
            AND info.census_address_prov = #{censusAddressProv,jdbcType=VARCHAR}
        </if>
        <if test="censusAddressCity != null and censusAddressCity!=''">
            AND info.census_address_city = #{censusAddressCity,jdbcType=VARCHAR}
        </if>
        <if test="censusAddressCity != null and censusAddressCity!=''">
            AND info.census_address_area = #{censusAddressCity,jdbcType=VARCHAR}
        </if>
        <if test="censusAddress != null and censusAddress!=''">
            AND info.census_address = #{censusAddress,jdbcType=VARCHAR}
        </if>
        <if test="studentNumber != null and studentNumber!=''">
            AND info.student_number = #{studentNumber,jdbcType=VARCHAR}
        </if>
        <!--        <if test="orgIdList != null and orgIdList!=''">
                    AND info.school_id IN
                    <foreach item="orgIdList" index="index" collection="orgIdList" open="(" separator="," close=")">
                        #{orgIdList}
                    </foreach>
                </if>
                <if test="schoolIdList != null and schoolIdList!=''">
                    AND info.organ_id IN
                    <foreach item="schoolIdList" index="index" collection="schoolIdList" open="(" separator="," close=")">
                        #{schoolIdList}
                    </foreach>
                </if>-->
        <if test="classId != null and classId!=''">
            AND info.class_id = #{classId,jdbcType=INTEGER}
        </if>
        <if test="gradeId != null and gradeId!=''">
            AND info.grade_id = #{gradeId,jdbcType=INTEGER}
        </if>
        <if test="schoolId != null and schoolId!=''">
            AND info.school_id = #{schoolId,jdbcType=INTEGER}
        </if>
    </select>

    <!-- 导出学生信息 -->
    <select id="exportStudentInfo" resultType="com.huiyi.campus.dao.vo.health.StudentInfoRecordVo">
        SELECT
        info.id AS "id",
        info.student_name AS "studentName",
        info.sex AS "sex",
        info.age AS "age",
        info.birth_date AS "birthDate",
        info.parent_id AS "parentId",
        p.user_name AS "parentName",
        info.school_id AS "schoolId",
        school.school_name AS "schoolName",
        info.organ_id AS "organId",
        organ.organ_name AS "organName",
        info.student_number AS "studentNumber",
        info.grade_id AS "gradeId",
        grade.grade_name AS "gradeName",
        info.class_id AS "classId",
        class.class_name AS "className",
        info.nationality AS "nationality",
        info.id_card AS "idCard",
        info.phone_number AS "phoneNumber",
        info.image AS "image",
        info.family_address_prov AS "familyAddressProv",
        info.family_address_city AS "familyAddressCity",
        info.family_address_area AS "familyAddressArea",
        info.family_address AS "familyAddress",
        info.census_address_prov AS "censusAddressProv",
        info.census_address_city AS "censusAddressCity",
        info.census_address_area AS "censusAddressArea",
        info.census_address AS "censusAddress",
        info.enter_time AS "enterTime",
        info.doctor_id AS "doctorId",
        u.nick_name AS "doctorName",
        info.duty_doctor AS "dutyDoctor",
        info.phy_file_date AS "phyFileDate",
        info.create_time AS "createTime",
        info.operator_id AS "operatorId"
        FROM
        phy_student_info info
        LEFT JOIN sys_parent p ON info.parent_id = p.id
        LEFT JOIN sys_school school ON info.school_id = school.id
        LEFT JOIN sys_organ organ ON info.organ_id = organ.id
        LEFT JOIN sys_doctor doctor ON info.doctor_id = doctor.id
        LEFT JOIN sys_user u ON info.doctor_id = u.id
        LEFT JOIN sys_grade grade ON info.grade_id = grade.id
        LEFT JOIN sys_grade_class class ON info.class_id = class.id
        <where>
            <if test="studentIds != null and studentIds.size() > 0">
                info.id in
                <foreach collection="studentIds" item="item" open="(" separator="," close=")">
                    #{item,jdbcType=VARCHAR}
                </foreach>
            </if>
            <if test="studentName != null and studentName!=''">
                AND info.student_name = #{studentName,jdbcType=VARCHAR}
            </if>
            <if test="sex != null and sex!=''">
                AND info.sex = #{sex,jdbcType=TINYINT}
            </if>
            <if test="familyAddressProv != null and familyAddressProv!=''">
                AND info.family_address_prov = #{familyAddressProv,jdbcType=VARCHAR}
            </if>
            <if test="familyAddressCity != null and familyAddressCity!=''">
                AND info.family_address_city = #{familyAddressCity,jdbcType=VARCHAR}
            </if>
            <if test="familyAddressArea != null and familyAddressArea!=''">
                AND info.family_address_area = #{familyAddressArea,jdbcType=VARCHAR}
            </if>
            <if test="familyAddress != null and familyAddress!=''">
                AND info.family_address = #{familyAddress,jdbcType=VARCHAR}
            </if>
            <if test="censusAddressProv != null and censusAddressProv!=''">
                AND info.census_address_prov = #{censusAddressProv,jdbcType=VARCHAR}
            </if>
            <if test="censusAddressCity != null and censusAddressCity!=''">
                AND info.census_address_city = #{censusAddressCity,jdbcType=VARCHAR}
            </if>
            <if test="censusAddressCity != null and censusAddressCity!=''">
                AND info.census_address_area = #{censusAddressCity,jdbcType=VARCHAR}
            </if>
            <if test="censusAddress != null and censusAddress!=''">
                AND info.census_address = #{censusAddress,jdbcType=VARCHAR}
            </if>
            <if test="studentNumber != null and studentNumber!=''">
                AND info.student_number = #{studentNumber,jdbcType=VARCHAR}
            </if>
            <if test="orgIdList != null and orgIdList.size() > 0">
                or info.school_id IN
                <foreach item="item" index="index" collection="orgIdList" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="schoolIdList != null and schoolIdList.size() > 0">
                or info.organ_id IN
                <foreach item="item" index="index" collection="schoolIdList" open="(" separator="," close=")">
                    #{item}
                </foreach>
            </if>
            <if test="classId != null and classId!=''">
                AND info.class_id = #{classId,jdbcType=INTEGER}
            </if>
            <if test="gradeId != null and gradeId!=''">
                AND info.grade_id = #{gradeId,jdbcType=INTEGER}
            </if>
        </where>
    </select>

    <!--批量导入学生档案信息-->
    <insert id="insertSelectiveList" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index"
                 separator=";">
            insert into phy_student_info
            <trim prefix="(" suffix=")" suffixOverrides=",">
                <if test="item.id != null">
                    id,
                </if>
                <if test="item.studentName != null">
                    student_name,
                </if>
                <if test="item.sex != null">
                    sex,
                </if>
                <if test="item.age != null">
                    age,
                </if>
                <if test="item.birthDate != null">
                    birth_date,
                </if>
                <if test="item.parentId != null">
                    parent_id,
                </if>
                <if test="item.schoolId != null">
                    school_id,
                </if>
                <if test="item.studentNumber != null">
                    student_number,
                </if>
                <if test="item.gradeId != null">
                    grade_id,
                </if>
                <if test="item.classId != null">
                    class_id,
                </if>
                <if test="item.idCard != null">
                    id_card,
                </if>
                <if test="item.phoneNumber != null">
                    phone_number,
                </if>
                <if test="item.image != null">
                    image,
                </if>
                <if test="item.familyAddress != null">
                    family_address,
                </if>
                <if test="item.censusAddress != null">
                    census_address,
                </if>
                <if test="item.enterTime != null">
                    enter_time,
                </if>
                <if test="item.doctorId != null">
                    doctor_id,
                </if>
                <if test="item.dutyDoctor != null">
                    duty_doctor,
                </if>
                <if test="item.phyFileDate != null">
                    phy_file_date,
                </if>
                <if test="item.createTime != null">
                    create_time,
                </if>
                <if test="item.updateTime != null">
                    update_time,
                </if>
                <if test="item.operatorId != null">
                    operator_id,
                </if>
                <if test="item.familyAddressProv != null">
                    family_address_prov,
                </if>
                <if test="item.familyAddressCity != null">
                    family_address_city,
                </if>
                <if test="item.familyAddressArea != null">
                    family_address_area,
                </if>
                <if test="item.censusAddressProv != null">
                    census_address_prov,
                </if>
                <if test="item.censusAddressCity != null">
                    census_address_city,
                </if>
                <if test="item.censusAddressArea != null">
                    census_address_area,
                </if>
            </trim>
            <trim prefix="values (" suffix=")" suffixOverrides=",">
                <if test="item.id != null">
                    #{item.id,jdbcType=VARCHAR},
                </if>
                <if test="item.studentName != null">
                    #{item.studentName,jdbcType=VARCHAR},
                </if>
                <if test="item.sex != null">
                    #{item.sex,jdbcType=TINYINT},
                </if>
                <if test="item.age != null">
                    #{item.age,jdbcType=INTEGER},
                </if>
                <if test="item.birthDate != null">
                    #{item.birthDate,jdbcType=VARCHAR},
                </if>
                <if test="item.parentId != null">
                    #{item.parentId,jdbcType=VARCHAR},
                </if>
                <if test="item.schoolId != null">
                    #{item.schoolId,jdbcType=INTEGER},
                </if>
                <if test="item.studentNumber != null">
                    #{item.studentNumber,jdbcType=VARCHAR},
                </if>
                <if test="item.gradeId != null">
                    #{item.gradeId,jdbcType=VARCHAR},
                </if>
                <if test="item.classId != null">
                    #{item.classId,jdbcType=VARCHAR},
                </if>
                <if test="item.idCard != null">
                    #{item.idCard,jdbcType=VARCHAR},
                </if>
                <if test="item.phoneNumber != null">
                    #{item.phoneNumber,jdbcType=VARCHAR},
                </if>
                <if test="item.image != null">
                    #{item.image,jdbcType=VARCHAR},
                </if>
                <if test="item.familyAddress != null">
                    #{item.familyAddress,jdbcType=VARCHAR},
                </if>
                <if test="item.censusAddress != null">
                    #{item.censusAddress,jdbcType=VARCHAR},
                </if>
                <if test="item.enterTime != null">
                    #{item.enterTime,jdbcType=TIMESTAMP},
                </if>
                <if test="item.doctorId != null">
                    #{item.doctorId,jdbcType=INTEGER},
                </if>
                <if test="item.dutyDoctor != null">
                    #{item.dutyDoctor,jdbcType=VARCHAR},
                </if>
                <if test="item.phyFileDate != null">
                    #{item.phyFileDate,jdbcType=TIMESTAMP},
                </if>
                <if test="item.createTime != null">
                    #{item.createTime,jdbcType=TIMESTAMP},
                </if>
                <if test="item.updateTime != null">
                    #{item.updateTime,jdbcType=TIMESTAMP},
                </if>
                <if test="item.operatorId != null">
                    #{item.operatorId,jdbcType=INTEGER},
                </if>
                <if test="item.familyAddressProv != null">
                    #{item.familyAddressProv,jdbcType=VARCHAR},
                </if>
                <if test="item.familyAddressCity != null">
                    #{item.familyAddressCity,jdbcType=VARCHAR},
                </if>
                <if test="item.familyAddressArea != null">
                    #{item.familyAddressArea,jdbcType=VARCHAR},
                </if>
                <if test="item.censusAddressProv != null">
                    #{item.censusAddressProv,jdbcType=VARCHAR},
                </if>
                <if test="item.censusAddressCity != null">
                    #{item.censusAddressCity,jdbcType=VARCHAR},
                </if>
                <if test="item.censusAddressArea != null">
                    #{item.censusAddressArea,jdbcType=VARCHAR},
                </if>
            </trim>
        </foreach>
    </insert>
    <!--删除学生健康档案信息-->
    <delete id="deleteByPrimaryKeyAndHealthAndItem">
        DELETE
                phy_student_info,
                phy_student_health_info,
                phy_item_result
        FROM
	        phy_student_info
	    LEFT JOIN phy_student_health_info ON phy_student_info.id = phy_student_health_info.phy_student_id
	    LEFT JOIN phy_item_result ON phy_student_health_info.id = phy_item_result.phy_health_id
        WHERE
	        phy_student_info.id =
                #{id,jdbcType=VARCHAR}
    </delete>
    <!--根据学生编号查询学生信息是否存在-->
    <select id="selectStudentByStudentNumber" resultType="com.huiyi.campus.dao.vo.health.StudentInfoRecordVo">
        SELECT
        <include refid="Base_Column_List"/>
        FROM
        phy_student_info
        WHERE 1=1
        <if test="id != null and id!=''">
            AND id = #{id,jdbcType=VARCHAR}
        </if>
        <if test="studentName != null and studentName!=''">
            AND student_name = #{studentName,jdbcType=VARCHAR}
        </if>
        <if test="sex != null and sex!=''">
            AND sex = #{sex,jdbcType=TINYINT}
        </if>
        <if test="familyAddress != null and familyAddress!=''">
            AND family_address = #{familyAddress,jdbcType=VARCHAR}
        </if>
        <if test="censusAddress != null and censusAddress!=''">
            AND census_address = #{censusAddress,jdbcType=VARCHAR}
        </if>
        <if test="studentNumber != null and studentNumber!=''">
            AND student_number = #{studentNumber,jdbcType=VARCHAR}
        </if>
        <if test="schoolId != null and schoolId!=''">
            AND school_id = #{schoolId,jdbcType=INTEGER}
        </if>
        <if test="classId != null and classId!=''">
            AND class_id = #{classId,jdbcType=INTEGER}
        </if>
    </select>
    <!--根据学生ID查询数据-->
    <select id="selectByPrimaryStudentKey" resultType="com.huiyi.campus.dao.vo.health.StudentInfoRecordVo">
        SELECT
        info.id AS "id",
        info.student_name AS "studentName",
        info.sex AS "sex",
        info.age AS "age",
        info.birth_date AS "birthDate",
        info.parent_id AS "parentId",
        p.user_name AS "parentName",
        info.school_id AS "schoolId",
        school.school_name AS "schoolName",
        info.organ_id AS "organId",
        organ.organ_name AS "organName",
        info.student_number AS "studentNumber",
        info.grade_id AS "gradeId",
        grade.grade_name AS "gradeName",
        info.class_id AS "classId",
        class.class_name AS "className",
        info.nationality AS "nationality",
        info.id_card AS "idCard",
        info.phone_number AS "phoneNumber",
        info.image AS "image",
        info.family_address_prov AS "familyAddressProv",
        info.family_address_city AS "familyAddressCity",
        info.family_address_area AS "familyAddressArea",
        info.family_address AS "familyAddress",
        info.census_address_prov AS "censusAddressProv",
        info.census_address_city AS "censusAddressCity",
        info.census_address_area AS "censusAddressArea",
        info.census_address AS "censusAddress",
        info.enter_time AS "enterTime",
        info.doctor_id AS "doctorId",
        u.nick_name AS "doctorName",
        info.duty_doctor AS "dutyDoctor",
        info.phy_file_date AS "phyFileDate",
        info.create_time AS "createTime",
        info.operator_id AS "operatorId"
        FROM
        phy_student_info info
        LEFT JOIN sys_parent p ON info.parent_id = p.id
        LEFT JOIN sys_school school ON info.school_id = school.id
        LEFT JOIN sys_organ organ ON info.organ_id = organ.id
        LEFT JOIN sys_doctor doctor ON info.doctor_id = doctor.id
        LEFT JOIN sys_user u ON info.doctor_id = u.id
        LEFT JOIN sys_grade grade ON info.grade_id = grade.id
        LEFT JOIN sys_grade_class class ON info.class_id = class.id
        WHERE 1=1
        <if test="id != null and id!=''">
            AND info.id = #{id,jdbcType=VARCHAR}
        </if>
        <if test="studentName != null and studentName!=''">
            AND info.student_name = #{studentName,jdbcType=VARCHAR}
        </if>
        <if test="familyAddress != null and familyAddress!=''">
            AND info.family_address = #{familyAddress,jdbcType=VARCHAR}
        </if>
        <if test="censusAddress != null and censusAddress!=''">
            AND info.census_address = #{censusAddress,jdbcType=VARCHAR}
        </if>
        <if test="studentNumber != null and studentNumber!=''">
            AND info.student_number = #{studentNumber,jdbcType=VARCHAR}
        </if>
        <if test="schoolId != null and schoolId!=''">
            AND info.school_id = #{schoolId,jdbcType=INTEGER}
        </if>
    </select>
</mapper>